function prepareData(t,{sprintId:e}){function a(t,e,a=!1){return t.sort(((t,r)=>{const i=Number(`${t[e]}`.match(/\d+/g)),n=Number(`${r[e]}`.match(/\d+/g));return i>n?a?1:-1:n>i?a?-1:1:0}))}function r(t,e){const a=Math.abs(t)%100,r=Math.abs(t)%10;return a>10&&a<20?e[2]:r>1&&r<5?e[1]:1==r?e[0]:e[2]}function n(t,e,a){return t.filter((t=>{const{timestamp:r}=t;return e<=r&&r<=a}))}function s(t,e){const a=e[1][t],i=e[0][t];return{title:t,valueText:`${a} ${r(a,["–∫–æ–º–º–∏—Ç","–∫–æ–º–º–∏—Ç–∞","–∫–æ–º–º–∏—Ç–æ–≤"])}`,differenceText:`${a-i} ${r(a-i,["–∫–æ–º–º–∏—Ç","–∫–æ–º–º–∏—Ç–∞","–∫–æ–º–º–∏—Ç–æ–≤"])}`}}const o=t.find((t=>t.id===e)),{name:u,startAt:c,finishAt:m}=o;console.log(o);let[d,l,h,p,f]=[[],[],[],[],[]];t.forEach((t=>{const{type:e,createdAt:a,author:r,summaries:i}=t;"User"===e&&d.push(t),"Sprint"===e&&l.push(t),"Comment"===e&&c<=a&&a<=m&&(t.author="object"==typeof r?r.id:r,h.push(t)),"Commit"===e&&(t.author="object"==typeof r?r.id:r,t.summaries=i.map((t=>"object"==typeof t?t.id:t)),p.push(t)),"Summary"===e&&f.push(t)})),l=a(l,"id",!0),d=a(d,"id",!0);const v=h.reduce(((t,e)=>{let{author:a,likes:r}=e;return r&&(t[a]=(t[a]?t[a]:0)+r.length),t}),{}),b={alias:"vote",data:{title:"–°–∞–º—ã–π –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫",subtitle:u,emoji:"üîé",users:a(d.map((t=>{const{id:e,name:a,avatar:r}=t;return{id:e,name:a,avatar:r,valueText:`${v[e]} –≥–æ–ª–æ—Å–æ–≤`}})),"valueText")}},x=n(p,c,m),$=x.reduce(((t,e)=>{let{author:a}=e;return t[a]=(t[a]?t[a]:0)+1,t}),{}),g=d.map((t=>{const{id:e,name:a,avatar:r}=t;return{id:e,name:a,avatar:r,valueText:`${$[e]||0}`}})),T={alias:"leaders",data:{title:"–ë–æ–ª—å—à–µ –≤—Å–µ–≥–æ –∫–æ–º–º–∏—Ç–æ–≤",subtitle:u,emoji:"üëë",users:a(g,"valueText")}},y={alias:"chart",data:{title:"–ö–æ–º–º–∏—Ç—ã",subtitle:u,values:l.map((t=>{const{id:a,name:r,startAt:i,finishAt:s}=t,o=a===e?{active:!0}:{};return{id:a,hint:r,valueText:`${n(p,i,s).length}`,...o}})),users:a(g,"valueText")}},k=l.findIndex((t=>t.id===e)),w=[l[k-1],o].reduce(((t,e)=>{const{startAt:a,finishAt:r}=e;var i,s;return[...t,(i=n(p,a,r),s=f,i.reduce(((t,e)=>{const{summaries:a}=e,r=s.filter((t=>a.includes(t.id))).map((t=>t.added+t.removed)).reduce(((t,e)=>t+e),0);switch(!0){case r>1001:++t["> 1001 —Å—Ç—Ä–æ–∫–∏"];break;case r>500&&r<=1e3:++t["501 ‚Äî 1000 —Å—Ç—Ä–æ–∫"];break;case r>100&&r<=500:++t["101 ‚Äî 500 —Å—Ç—Ä–æ–∫"];break;case r>=1&&r<=100:++t["1 ‚Äî 100 —Å—Ç—Ä–æ–∫"]}return t}),{"> 1001 —Å—Ç—Ä–æ–∫–∏":0,"501 ‚Äî 1000 —Å—Ç—Ä–æ–∫":0,"101 ‚Äî 500 —Å—Ç—Ä–æ–∫":0,"1 ‚Äî 100 —Å—Ç—Ä–æ–∫":0,countCommits:i.length}))]}),[]),A=w[1].countCommits,C=w[1].countCommits-w[0].countCommits,j={alias:"diagram",data:{title:"–†–∞–∑–º–µ—Ä –∫–æ–º–º–∏—Ç–æ–≤",subtitle:u,totalText:`${A} ${r(A,["–∫–æ–º–º–∏—Ç","–∫–æ–º–º–∏—Ç–∞","–∫–æ–º–º–∏—Ç–æ–≤"])}`,differenceText:`${C} —Å –ø—Ä–æ—à–ª–æ–≥–æ —Å–ø—Ä–∏–Ω—Ç–∞`,categories:[s("> 1001 —Å—Ç—Ä–æ–∫–∏",w),s("501 ‚Äî 1000 —Å—Ç—Ä–æ–∫",w),s("101 ‚Äî 500 —Å—Ç—Ä–æ–∫",w),s("1 ‚Äî 100 —Å—Ç—Ä–æ–∫",w)]}},D={sun:[],mon:[],tue:[],wed:[],thu:[],fri:[],sat:[]};for(key in D)for(i=0;i<24;i++)D[key].push(0);const M={alias:"activity",data:{title:"–ö–æ–º–º–∏—Ç—ã",subtitle:u,data:x.reduce(((t,e)=>{const{timestamp:a}=e,r=new Date(a),i=r.toLocaleString("en",{weekday:"short",timeZone:"Europe/Moscow"}).toLowerCase(),n=Number(r.toLocaleString("en",{hour12:!1,hour:"numeric",timeZone:"Europe/Moscow"}));return t[i][n]=t[i][n]?++t[i][n]:1,t}),D)}};return console.log(l),[b,T,y,j,M]}module.exports={prepareData};